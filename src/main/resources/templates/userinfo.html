<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="layout/default">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body layout:fragment="content" data-spy="scroll" data-target="#myScrollspy">
	<style type="text/css">
		/* Custom Styles */
		ul.nav-pills {
			width: 140px;
			margin-top: 20px;
			border-radius: 4px;
			border: 1px solid #ddd;
			box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067);
		}
		
		ul.nav-pills li {
			margin: 0;
			border-top: 1px solid #ddd;
		}
		
		ul.nav-pills li:first-child {
			border-top: none;
		}
		
		ul.nav-pills li a {
			/* margin: 0;
			padding: 8px 16px; */
			border-radius: 0;
		}
		
		/* ul.nav-pills li.active a, ul.nav-tabs li.active a:hover {
			color: #fff;
			background: #0088cc;
			border: 1px solid #0088cc;
		} */
		
		ul.nav-pills li:first-child a {
			border-radius: 4px 4px 0 0;
		}
		
		ul.nav-pills li:last-child a {
			border-radius: 0 0 4px 4px;
		}
		
		ul.nav-pills.affix {
			top: 30px; /* Set the top position of pinned element */
		}
	</style> 
	<script>
		$(function() {
			$("#myNav").affix({
				offset : {
					top : 125
				}
			});
		});
		
		var imgType = [".bmp", ".gif", ".png", ".jpg", ".jpeg"];
		
		function setHeadImg(){
			if($("#input_head").val()){
				$("#form_setHead").ajaxSubmit(function(data){
					if(data.result == "false"){
						$.alert({
						    title: '提示',
						    content: data.message
						});
					}else{
						$.alert({
						    title: '提示',
						    content: "上传成功"
						});
						$("#input_head").val("");
						
						/* var src = $("#img_head").attr("src");
						src = src.substr(0, src.lastIndexOf("/") + 1) + data.headImg;
						$("#img_head").attr("src", src); */
					}
				});
			}
		}
		
		function checkHeadImg(obj){
			if($(obj).val()){
				var filename = $(obj).val();
				var type = filename.substr(filename.lastIndexOf("."));
				if(imgType.indexOf(type) == -1){
					$.alert({
					    title: '提示',
					    content: "图片格式不被支持，仅支持以下图片格式：" + imgType.join("，")
					});
					$(obj).val("");
				}else{
					// 图片预览
					bindAvatar(obj, document.getElementById("img_head"));
				}
			}
		}
		
		function bindAvatar(el_input, el_img) {
			
			if(window.URL.createObjectURL){
				el_img.src = window.URL.createObjectURL(el_input.files[0]);	
			} else {
				$.alert({
				    title: '提示',
				    content: "此浏览器不支持预览"
				});
			}
		 }
	</script>
	<div class="container">
		<!-- <div class="jumbotron">
			<h1>Bootstrap Affix</h1>
		</div> -->
		<div class="row">
			<div class="col-xs-4 col-md-3 col-lg-2" id="myScrollspy">
				<ul class="nav nav-pills nav-stacked" id="myNav">
					<li class="active"><a href="#section-1">修改头像</a></li>
					<li><a href="#section-2">个人信息</a></li>
					<li><a href="#section-3">修改密码</a></li>
					<li><a href="#section-4">第四部分</a></li>
					<li><a href="#section-5">第五部分</a></li>
				</ul>
			</div>
			<div class="col-xs-8 col-md-9 col-lg-10">
				<h3 id="section-1">修改头像</h3>
				
				<div class="row">
					<div class="col-sm-offset-2">
						<form id="form_setHead" th:action="@{'/user/setHead/'+${user.id}}" method="post" enctype="multipart/form-data">
						<img id="img_head" th:src="@{'/common/headImg/'+${user.headImg}}" class="img-circle" 
							style="width:100px; height:100px; cursor:pointer;"  onclick="$('#input_head').trigger('click');"/>
						<a class="btn btn-default" onclick="setHeadImg()" style="margin-left:20px;">上传头像</a>
						<input type="file" name="file" id="input_head" accept="image/*" 
							style="width:0; height:0;" onchange="checkHeadImg(this)"/>
						</form>
					</div>
				</div>
				
				<h3 id="section-2">个人信息</h3>
				<form class="form-horizontal" role="form" th:object="${user}">
					
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">昵称</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{nickname}">
						</div>
					</div>
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">性别</label>
						<div class="col-sm-10">
							<label class="radio-inline">
								<input type="radio" name="optionsRadiosinline" id="optionsRadios3" value="option1" checked>男
							</label>
							<label class="radio-inline">
								<input type="radio" name="optionsRadiosinline" id="optionsRadios4"  value="option2"> 女
							</label>
						</div>
					</div>
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">生日</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" >
						</div>
					</div>
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">手机号码</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{phone}">
						</div>
					</div>
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">邮箱</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{email}">
						</div>
					</div>
					<div class="form-group">
						<label for="lastname" class="col-sm-2 control-label">住址</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" >
						</div>
					</div>
				</form>
				<hr>
				
				<h3 id="section-3">修改密码</h3>
				<p>Nullam hendrerit justo non leo aliquet imperdiet. Etiam in
					sagittis lectus. Suspendisse ultrices placerat accumsan. Mauris
					quis dapibus orci. In dapibus velit blandit pharetra tincidunt.
					Quisque non sapien nec lacus condimentum facilisis ut iaculis enim.
					Sed viverra interdum bibendum. Donec ac sollicitudin dolor. Sed
					fringilla vitae lacus at rutrum. Phasellus congue vestibulum ligula
					sed consequat.</p>
				<p>Vestibulum consectetur scelerisque lacus, ac fermentum lorem
					convallis sed. Nam odio tortor, dictum quis malesuada at,
					pellentesque vitae orci. Vivamus elementum, felis eu auctor
					lobortis, diam velit egestas lacus, quis fermentum metus ante quis
					urna. Sed at facilisis libero. Cum sociis natoque penatibus et
					magnis dis parturient montes, nascetur ridiculus mus. Vestibulum
					bibendum blandit dolor. Nunc orci dolor, molestie nec nibh in,
					hendrerit tincidunt ante. Vivamus sem augue, hendrerit non sapien
					in, mollis ornare augue.</p>
				<hr>
				<h2 id="section-4">第三部分</h2>
				<p>Integer pulvinar leo id risus pellentesque vestibulum. Sed
					diam libero, sodales eget sapien vel, porttitor bibendum enim.
					Donec sed nibh vitae lorem porttitor blandit in nec ante.
					Pellentesque vitae metus ipsum. Phasellus sed nunc ac sem malesuada
					condimentum. Etiam in aliquam lectus. Nam vel sapien diam. Donec
					pharetra id arcu eget blandit. Proin imperdiet mattis augue in
					porttitor. Quisque tempus enim id lobortis feugiat. Suspendisse
					tincidunt risus quis dolor fringilla blandit. Ut sed sapien at
					purus lacinia porttitor. Nullam iaculis, felis a pretium ornare,
					dolor nisl semper tortor, vel sagittis lacus est consequat eros.
					Sed id pretium nisl. Curabitur dolor nisl, laoreet vitae aliquam
					id, tincidunt sit amet mauris.</p>
				<p>Phasellus vitae suscipit justo. Mauris pharetra feugiat ante
					id lacinia. Etiam faucibus mauris id tempor egestas. Duis luctus
					turpis at accumsan tincidunt. Phasellus risus risus, volutpat vel
					tellus ac, tincidunt fringilla massa. Etiam hendrerit dolor eget
					ante rutrum adipiscing. Cras interdum ipsum mattis, tempus mauris
					vel, semper ipsum. Duis sed dolor ut enim lobortis pellentesque
					ultricies ac ligula. Pellentesque convallis elit nisi, id vulputate
					ipsum ullamcorper ut. Cras ac pulvinar purus, ac viverra est.
					Suspendisse potenti. Integer pellentesque neque et elementum
					tempus. Curabitur bibendum in ligula ut rhoncus.</p>
				<p>Quisque pharetra velit id velit iaculis pretium. Nullam a
					justo sed ligula porta semper eu quis enim. Pellentesque
					pellentesque, metus at facilisis hendrerit, lectus velit facilisis
					leo, quis volutpat turpis arcu quis enim. Nulla viverra lorem
					elementum interdum ultricies. Suspendisse accumsan quam nec ante
					mollis tempus. Morbi vel accumsan diam, eget convallis tellus.
					Suspendisse potenti.</p>
				<hr>
				<h2 id="section-5">第四部分</h2>
				<p>Suspendisse a orci facilisis, dignissim tortor vitae,
					ultrices mi. Vestibulum a iaculis lacus. Phasellus vitae convallis
					ligula, nec volutpat tellus. Vivamus scelerisque mollis nisl, nec
					vehicula elit egestas a. Sed luctus metus id mi gravida, faucibus
					convallis neque pretium. Maecenas quis sapien ut leo fringilla
					tempor vitae sit amet leo. Donec imperdiet tempus placerat.
					Pellentesque pulvinar ultrices nunc sed ultrices. Morbi vel mi
					pretium, fermentum lacus et, viverra tellus. Phasellus sodales
					libero nec dui convallis, sit amet fermentum sapien auctor.
					Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
					posuere cubilia Curae; Sed eu elementum nibh, quis varius libero.</p>
				<p>Vestibulum quis quam ut magna consequat faucibus.
					Pellentesque eget nisi a mi suscipit tincidunt. Ut tempus dictum
					risus. Pellentesque viverra sagittis quam at mattis. Suspendisse
					potenti. Aliquam sit amet gravida nibh, facilisis gravida odio.
					Phasellus auctor velit at lacus blandit, commodo iaculis justo
					viverra. Etiam vitae est arcu. Mauris vel congue dolor. Aliquam
					eget mi mi. Fusce quam tortor, commodo ac dui quis, bibendum
					viverra erat. Maecenas mattis lectus enim, quis tincidunt dui
					molestie euismod. Curabitur et diam tristique, accumsan nunc eu,
					hendrerit tellus.</p>
				<p>Phasellus fermentum, neque sit amet sodales tempor, enim ante
					interdum eros, eget luctus ipsum eros ut ligula. Nunc ornare erat
					quis faucibus molestie. Proin malesuada consequat commodo. Mauris
					iaculis, eros ut dapibus luctus, massa enim elementum purus, sit
					amet tristique purus purus nec felis. Morbi vestibulum sapien eget
					porta pulvinar. Nam at quam diam. Proin rhoncus, felis elementum
					accumsan dictum, felis nisi vestibulum tellus, et ultrices risus
					felis in orci. Quisque vestibulum sem nisl, vel congue leo dictum
					nec. Cras eget est at velit sagittis ullamcorper vel et lectus. In
					hac habitasse platea dictumst. Etiam interdum iaculis velit, vel
					sollicitudin lorem feugiat sit amet. Etiam luctus, quam sed sodales
					aliquam, lorem libero hendrerit urna, faucibus rhoncus massa nibh
					at felis. Curabitur ac tempus nulla, ut semper erat. Vivamus porta
					ullamcorper sem, ornare egestas mauris facilisis id.</p>
				<p>Ut ut risus nisl. Fusce porttitor eros at magna luctus, non
					congue nulla eleifend. Aenean porttitor feugiat dolor sit amet
					facilisis. Pellentesque venenatis magna et risus commodo, a commodo
					turpis gravida. Nam mollis massa dapibus urna aliquet, quis iaculis
					elit sodales. Sed eget ornare orci, eu malesuada justo. Nunc lacus
					augue, dictum quis dui id, lacinia congue quam. Nulla sem sem,
					aliquam nec dolor ac, tempus convallis nunc. Interdum et malesuada
					fames ac ante ipsum primis in faucibus. Nulla suscipit convallis
					iaculis. Quisque eget commodo ligula. Praesent leo dui, facilisis
					quis eleifend in, aliquet vitae nunc. Suspendisse fermentum odio ac
					massa ultricies pellentesque. Fusce eu suscipit massa.</p>
				
			</div>
		</div>
	</div>
</body>
</html>